## 5.变量

*   跟普通的编程语言中的变量差不多，比如：Java中的变量

### 1.分类

* 系统变量 ：	全局变量    会话变量
* 自定义变量      局部变量    用户变量

### 2.详解

#### 1.系统变量

* 说明：是由系统提供的，不是用户定义的，属于服务器层面

* 作用域

    * 全局变量：服务器每次启动将为所有的全局变量赋初始值，针对所有的回话（连接）有效，但是不能跨重启
    * 回话变量：仅仅针对当前回话（连接）有效

*   使用

    ```mysql
    # 以下global|session如果都不写，可以省略，默认session
    
    # 1.查看所有的系统变量
        show global variables;#全局变量
        show [session] variables  #回话变量，默认回话
    # 2.查看满足条件的部分系统变量
        show global|session variables like '%char%'
        show session variables like '%char%'
    # 3.查看指定的某个系统变量的值
        select @@global|session.系统变量名
    # 4.为某个系统变量赋值
        #方式一：
            set global|session 系统变量名 = 值
        #方式二：
            set @@global|session.系统变量名 = 值
    
    注意：
    如果是全局级别，需要加上global,
    如果是回话级别，需要加上session,
    如果不写，默认的是session
    ```

#### 2.自定义变量

* 说明：变量时用户定义的，不是由系统的

* 步骤：

    * 声明
    * 赋值
    * 使用（查看、比较、运算等）

* 区别两种自定义变量

    |                  | 用户变量         | 局部变量                        |
    | ---------------- | ---------------- | ------------------------------- |
    | 作用域           | 当前会话中       | begin end 中                    |
    | 定义和使用的位置 | 会话中的任意位置 | 只能用在 begin end 中的第一句话 |
    | @符号            | 必须加@          | 一般不加，只有select使用        |
    | 类型             | 不限定           | 需要限定                        |

    

* 作用域：

    * 用户变量：很对当前回话（连接）有效，同于回话变量作用域                   

    * 局部变量：只能在定义它的begin end 中有效

* 使用

    *   用户变量

        ```mysql
        #1.声明并初始化
            set @用户变量名 = 值
            set @用户变量名 := 值
            select @用户变量名:= 值
        #2赋值
            #方式一
            就是声明并初始化，一样的操作
            #操作二
            select 字段1,字段2 into 变量名1，变量名2 from 表名；#注意是一个
        
        #3使用
        	select @用户变量名  #系统变量时2个@
        ```

    *   局部变量

        ```mysql
        # 注意，只用将用户变量的 @ 去掉就行
        
        # 1.声明并初始化
            declare 变量名 类型
            declare 变量名 类型 default 默认值
           
        # 2.赋值
            # 方式一
                set 用户变量名 = 值
                set 用户变量名 := 值
                select @用户变量名:= 值
            # 操作二
                select 字段 into 变量名 from 表名；#注意是一个
        # 3.使用
        	select @用户变量名
        ```
