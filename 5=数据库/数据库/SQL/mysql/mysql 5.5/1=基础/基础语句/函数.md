

## 4.函数

### 使用

*   DQL语言中条件查询使用，充当筛选条件

1.筛选条件分类

> select 函数名（实参列表）[from 表名]
>
> 特点：
>
> ​		叫什么：函数名
>
> ​		做什么：函数功能

### 分类：

*   单行函数：

*   分组函数：
    *   又叫统计函数、聚合函数、组函数
    *   统计使用

### 1.单行函数

#### 1.字符函数

```mysql
length
	length()  #获取字符串的字节个数
contact
	contact(字符串，字符串，...)   #拼接字符串
upper 、lower
	upper()   #转化为大写
	lower()    #转化为小写
substr  substring
	substr(字符串，截取的索引值，字符长度)   ;            #截取字符串，索引从 0 开始，长度默认为0
instr
	instr(字符串，子串) t;  # 返回子串在字符串中的第一次出现的起始索引，不存在返回值为0
trim
	trim(字符串)  ; #去除字符串前后的空格
	trim(子串 from 字符串) ； # 去除字符串前后出现的子串
lpad
	lpad(子符串，指定长度，子串)  #在指定字符串左边实现填充指定长度的子串
rpad
	rpad(子符串，指定长度，子串)  #在指定字符串右边实现填充指定长度的子串
repleace
	repleace(字符串，字符串中的子串1，子串2)  # 子串2替换掉字符串中的所有的子串1
```

#### 2.数学函数

```mysql
round(数值，保留的小数点位数)  
        1.四舍五入，不管正负，先进性绝对值四舍五入，然后进行加正负号
        2.小数位数默认0
ceil(参数只有一个)   
		#向上取整，返回 >= 该参数的最小整数
floor(参数只有一个)   
		#向下取整，返回 <= 该参数的最大整数
truncate(数值，小数点后保留几位)； 
		#截断
mod(被除数，除数)    
		#取余，结果和被除数保持一致，因为是被除数剩下来的
```

#### 3.日期函数

```mysql
now();   
		# 没有参数，返回当前系统日期+时间
curdate()  
		# 没有参数，返回当前系统日期
curtime()   
		# 没有参数，返回当前系统时间		
year，month,day,hour,minute,second
		year(时间)   #获取指定时间的年
         month(时间)        #获取指定时间的月
         monthname(时间)   #获取指定月份名称
str_to_date(时间，‘%y-%c-%d指定的格式’)  
		# 将字符通过指定的格式转化成日期
date_formt(日期，‘%y年%m月%d日’)  
		# 日期转换为固定的格式
datediff(日期1，日期2)  
		# 日期1 - 日期2得两者间隔天数
```

*   常用的日期格式

    | 格式符 | 功能                      |
    | ------ | ------------------------- |
    | %Y     | 四位的年份                |
    | %y     | 两位的年份                |
    | %m     | 月份（01,02,..11,12）     |
    | %c     | 月份（1,2,3，...，11,12） |
    | %d     | 日（01,02，...）          |
    | %H     | 小时，24小时制            |
    | %h     | 小时，12小时制            |
    | %i     | 分钟，（00,01,...59）     |
    | %s     | 秒，（00,01,...59）       |



#### 4.其他函数

* version()
* database()
* user()
* password（'字符‘）：返回该字符的密码形式
* md5('字符') ：返回该字符的md5加密形式



#### 5.流程控制函数 

*   参看循环结构

    ```mysql
    if
    case
    ```

### 2.分组函数

*   功能：用作统计使用，又称为聚合函数、统计函数、组函数

*   注意：和分组函数一同查询的字段有限制

*   参数：

    *   1.仅处理数值型的数据：sum avg   处理任何数据：max min count
    *   2.全部都忽略了null值
    *   3.可以和 distinct 搭配使用，剔除重复数据

    ```mysql
    sum(只有一个参数)    
    		# 求和
    avg(只有一个参数)  
    		# 平均值
    max
    		# 最大值
    min
    		# 最小值
    count
    	   计算非空数值个数
            1.count(*)  #统计行数，只要那一行有一列的数据存在，那这一行就统计进去（常用）
                select count(*)   from  employees   where  id='90'; #统计id为90的行数
            2.count(字段) ： 统计该字段上非空值的个数
            3.count(1)  #统计所有行，相当于添加了一列的1，然后进行统计1的个数
    ```

### 3.查询函数

```mysql
select databases() ; # 查询使用的库
select version(); # 查询版本
select user();
```

### 4.常用函数

```mysql
not(表达式) #与括号内的表达式取相反的结果
```



