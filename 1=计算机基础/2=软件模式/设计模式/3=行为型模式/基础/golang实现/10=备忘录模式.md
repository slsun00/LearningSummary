

```
    

### golang实现

![备忘录模式](%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F.png)

*   originator

    ```go
    type Originator struct {
        state string
    }
    
    func (o *Originator) setstate(state string){
        o.state = state
    }
    
    // 保存自身的一个状态，结构化为 Memento
    func (o *Originator) SavaStateToMomento(mememto *Memento) *Memento {
        memento.sate = o.state
        return memento
    }
    
    // 回复状态
    func (o *Originator) GetStateFromMomento(memento *Memento){
        o.State = memento.state
    }
```

* memento

    ```go
    // 这个结构是记录 originator 的状态的，所以其字段应该能详细描述应该存储的状态
    type Memento struct {
        state string
    }
    
    // 这个是否需要有对应的方法，看具体怎么设计把，为了体现 memento 不操作状态，就不涉及方法了
    // 这个说白了就是一个存储消息的结构
    ```

* caretaker

    ```go 
    type CareTaker struct {
        mementors []*Memento
    }
    
    // AddMemento 记录新的状态
    func (c *CareTaker) AddMento(memento *Memento) {
        c.mementors = append(c.mementors,memento)
    }
    ```

* 调用

    ```go
    // 注意调用流程
    func main(){
        orignator := new(Orignator)
        careTaker := new(CareTaker)
        // 开始流程
        orignator.SetSate("666")
        // 记录状态
        memento := new(Memento)
        orignator.SaveSateToMento(memento)
        // 管理者记录状态
        careTaker.AddMemento(memento)   
    }
    ```

    
