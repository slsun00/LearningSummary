## 概念

*  Singleton Pattern 
*  一种对象创建型模式,只创建一个实例
*  别称
    *  单件模式
    *  单态模式

## 介绍

*   意图
    *   采用一定的方法保证整个软件系统中，对于某个类只能存在一个对象实例， 并且该类只提供一个获取其对象的方法
    *   确保某一个类只能产生一个实例，而且自行实例化并向整个系统提供这个实例，
    *   这个类称为单例类，它提供全局访问的方法，避免频繁创建对象，节约内存
*   主要解决
    *   一个全局使用的类频繁地创建与销毁。
*   使用
    *   当您想控制实例数目，节省系统资源的时候
*   如何解决
    *   判断系统是否已经有这个单例，如果有则返回，如果没有则创建。
*   关键代码
    *   构造函数是私有的

## 优点

*   单例模式可以保证内存里只有一个实例，减少了内存的开销。
    *   尤其是频繁的创建和销毁实例
*   可以避免对资源的多重占用。（比如写文件操作）
*   单例模式设置全局访问点，可以优化和共享资源的访问





## 缺点

*   单例模式一般没有接口，扩展困难。
    *   如果要扩展，则除了修改原来的代码，没有第二种途径，违背开闭原则。
*   在并发测试中，单例模式不利于代码调试。
    *   在调试过程中，如果单例中的代码没有执行完，也不能模拟生成一个新的对象。
*   单例模式的功能代码通常写在一个类中，如果功能设计不合理，则很容易违背单一职责原则。



## 应用场景

```go
// 没有用过的一些场景，只用于存储知识，用到哪个就整理出哪个
1. 频繁创建的一些类，使用单例可以降低系统的内存压力，减少 GC
2. 某类需要频繁实例化，而创建的对象又频繁被销毁的时候
    * 线程的线程池
    * 网络连接池
3. 频繁访问数据库或文件的对象。
4. 某类只要求生成一个对象的时候，
    * 一个班中的班长、每个人的身份证号等。
    * 唯一生产唯一序列号
5. 某些类创建实例时占用资源较多，或实例化耗时较长，且经常使用。
    * 比如 I/O 与数据库的连接等
6. 对于一些控制硬件级别的操作，或者从系统上来讲应当是单一控制逻辑的操作，如果有多个实例，则系统会完全乱套。
7. 当对象需要被共享的场合。由于单例模式只允许创建一个对象，共享该对象可以节省内存，并加快对象访问速度。如 Web 中的配置对象、数据库的连接池等。
8. WEB 中的计数器，不用每次刷新都在数据库里加一次，用单例先缓存起来。
```
## 注意

* 不同语言 单例模式的实现原理不同，具体看各个语言的版本的 实现

### 种类

```java
饿汉式
    静态常量
    静态代码块
懒汉式
    线程不安全
    线程安全， 同步方法
    线程安全， 同步代码块
双重检查
静态内部类
枚举
```



### 懒汉模式
* 懒汉式就是创建对象时比较懒
* 先不急着创建对象，在需要加载配置文件的时候再去创建


### 饿汉模式

* 介绍
    * 直接创建好对象，这样不需要判断为空，同时也是线程安全
    * 在导入包的同时会创建该对象，并持续占有在内存中

*   使用

    *   使用 init 函数，也可以使用全局变量。
    *   要求对象初始化非常快，而且占用内存非常小的时候

*   优点

    *   类加载时能够直接实例化一个对象，类加载只有一次

    *   系统初始化，类加载的时候，它已经实例化了自己，创建好对象，可以直接使用

    *   单例模式是不需要创建对象的，所以类加载的同时加载对象

        

*   缺点

    *   将在包加载的时候就创建单例对象，并持续占有在内存中。当程序中用不到该对象时，浪费了一部分空间
    *   类加载的时间相对会长一点























































































































