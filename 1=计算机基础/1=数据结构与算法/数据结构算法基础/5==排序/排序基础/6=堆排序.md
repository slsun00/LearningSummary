## 主要思想

*   每次构造一个堆 ，将堆的根结点（最大值或最小值）添加到有序列中

## 堆定义

* 是具有以下性质的近似完全二叉树

    ```go
    //就是以二叉树的角度去操作数据组
    小跟堆
    	// 小的 root
    	父节点 < 左右孩子  
    	1. 根结点是最小者
    	2. 较小结点靠近根结点，不是绝对
                    ╭﹣﹣﹣﹣﹣﹣﹣﹣ 13 ﹣﹣﹣﹣﹣﹣﹣╮ 
            ╭﹣﹣﹣ 38 ﹣﹣﹣╮                ╭﹣﹣﹣ 49 ﹣﹣﹣╮               
        ╭﹣ 48              76               65              69      
        97 	 
    
    
    大根堆
    	// 大的 root
    	父节点 > 左右孩子 
		1. 根结点是最大者
    	2. 较大结点靠近根结点，不是绝对
                   ╭﹣﹣﹣﹣﹣﹣﹣﹣ 97 ﹣﹣﹣﹣﹣﹣﹣╮ 
            ╭﹣﹣﹣ 76 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮               
        ╭﹣ 48              49               13              65      
        38 	 
    
    
    
    重要的关系
        堆节点的关系
              k/2
             /
            k
           /  \
         2k    2k+1
    	最后一个非叶子节点的下标
    	解释
    		最后一个非叶子节点，其下面的结点下标，有一个正好是树的总长度(或者减一)
    		所以最后一个非叶子节点的下标为 heap.length / 2 - 1 (从 0 开始)
    
    
    https://zhuanlan.zhihu.com/p/104110241
    ```

## 堆构造

### 介绍

```java
使用步骤
    1. 构造有序堆
    	是将原始数据重新组织安排到一个二叉堆中，
    	堆有序就是一棵二叉树的每个节点都优先于它的两个子节点，不代表数组有序
    2. 下沉排序
    	叉堆中取出优先级高的直至取出所有元素，得到数组有序结果
    
堆排序方法
    自顶向下的堆有序化（下沉）
    	当前节点和左右孩子三者之中的比较
    	它是从非叶子节点开始的，即数组最后一个节点的父节点
    自低向上的堆有序化（上浮）
		根节点的左孩子开始进行，数组下标为1开始，进行自底向上的堆有序化。
    	在循环进行比较的时候会发现，这个节点已经进行过修复堆了，
    	所以当上浮操作不再交换的时候可以做一个标记，截止进行比较。

```

### 自顶向下

```java
注意
    当你交换一个元素之后，跟参与交换的元素子堆也要重复确定是大根堆
    向上调整的时候，还需要向下调整

数组	49  38  65  97  76  13  69  48
下标   0   1   2   3   4   5   6   7
    
		   ╭﹣﹣﹣﹣﹣﹣﹣﹣ 49 ﹣﹣﹣﹣﹣﹣﹣╮ 
    ╭﹣﹣﹣ 38 ﹣﹣﹣╮                ╭﹣﹣﹣ 65 ﹣﹣﹣╮               
╭﹣ 97              76               13              69      
48 	  
    
    

1. 倒数第一个非叶子节点  97
    // 调整其所在堆为：有序堆， 
    ╭﹣ 97        ╭﹣ 97 
    48 	         48
2. 倒数第二个非叶子节点 65
        // 调整其所在堆为：有序堆， 
      ╭﹣﹣﹣ 65 ﹣﹣﹣╮         ╭﹣﹣﹣ 69 ﹣﹣﹣╮            
     13              69        13              65

3. 倒数第三个非叶子节点 38    
    // 1. 调整其所在的最小堆为大根堆：有序堆，
        ╭﹣﹣﹣ 38 ﹣﹣﹣╮        ╭﹣﹣﹣ 97 ﹣﹣﹣╮             
        97              76      38              76 
	// 2. 移动过的 38 所处的堆就变成无序堆，需要调整
         ╭﹣﹣﹣ 97 ﹣﹣﹣╮                ╭﹣﹣﹣ 97 ﹣﹣﹣╮         
     ╭﹣ 38              76           ╭﹣ 48              76
    48                               38
4. 倒数第四个非叶子节点 49
    // 调整其所在的最小堆为大根堆：有序堆，
    ╭﹣﹣﹣﹣﹣﹣ 49 ﹣﹣﹣﹣﹣﹣﹣╮           ╭﹣﹣﹣﹣﹣﹣ 97 ﹣﹣﹣﹣﹣﹣﹣╮       
    97           			   69         49              			  69   
    // 移动过的 49 所在的堆也要调整为有序堆
               ╭﹣﹣﹣﹣﹣﹣﹣﹣ 97 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 49 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮               
    ╭﹣ 48              76               13              65      
    38 	  
    
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 97 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 76 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮               
    ╭﹣ 48              49               13              65      
    38 	  
```

### 排序

```java
步骤
    先交换，排除，然后从根部构造有序堆
// 构造中已经构造出有一个大根堆
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 97 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 76 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮               
    ╭﹣ 48              49               13              65      
    38 	 
                    
// 将 根位置的元素 和 最后一个位置的元素对换位置
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 38 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 76 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮               
        48              49               13              65      
    97 	    
// 调整 0 位置元素所在的最小堆为大根堆
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 76 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 38 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮   
                    
// 调整移动后，38 所在的最小堆为大根堆

        ╭﹣﹣﹣ 38 ﹣﹣﹣╮                   ╭﹣﹣﹣ 49 ﹣﹣﹣╮
    ╭﹣ 48              49              ╭﹣ 48              38
// 调整完毕
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 76 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 49 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮   
        48              38               13              65
    97      
//  76 49 69 48 38 13 65 97    
// 重复执行排序
    先交换，排除，然后从根部构造有序堆
```

### 重复排序

```java
while (排除掉最后一个元素，继续构造大根堆) {
	先交换，排除，然后从根部构造有序堆   
}
// 排除最后一个
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 76 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 49 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮   
        48              38               13              65
// 交换
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 65 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 49 ﹣﹣﹣╮                ╭﹣﹣﹣ 69 ﹣﹣﹣╮   
        48              38               13              76
//  同排序一样， 从 65 开始构造大根堆
                ╭﹣﹣﹣﹣﹣﹣﹣﹣ 69 ﹣﹣﹣﹣﹣﹣﹣╮ 
        ╭﹣﹣﹣ 49 ﹣﹣﹣╮                ╭﹣﹣﹣ 65        
        48              38               13              76               
```

## 操作

```java

```

