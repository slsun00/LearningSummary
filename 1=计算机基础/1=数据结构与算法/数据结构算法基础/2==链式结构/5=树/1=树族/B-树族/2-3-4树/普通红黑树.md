## 定义

*   一颗完美的平衡、有序的查找叉树

    ```js
    其实是一个 4-B树
    ```

    

## 结点规律

```go
// 节点元素数量和子节点(子树)数量是一一对应的 

// 主要是根据节点内的元素个数 ， 来判断该节点属于什么节点
// 具体为什么，可以参考操作的插入里的解释，只是参考。。。。我也有点儿不明白
节点内数据元素个数
    内部节点
        1 个 ： 两个子节点		     2-节点
        2 个 ： 三个子节点           3-节点
        3 个 ： 四个子节点           4-节点	
    叶子节点
		叶子节点没有没有子节点 ，但是对应一个节点有几个元素，叫法跟内部节点一样
// 注意 ：
   1. 就是说一个节点内含有的数据元素个数为 1 2 3  （空树为 0） ，只有这四种情况
   2. 除了叶子节点外，内部结点都没有空儿子
// 核心
	一个节点有 n 个元素，就叫 （n+1）-节点，就要对应 n+1 个子节点，叶子节点没有
	这种对应关系不能被破坏，破坏的话就需要被调整
```



### 内部节点

```js
// 参考2-3树的内部节点，都是一样的，只不过多了一个 4-节点，即一个节点可以当 3 个数据元素
// 打本画图，P9
```

### 叶子结点

```js
保证2-3-4树的优良平衡性
	从根到叶子节点的距离是一样长的
```



## 树高

```js
最差的情况 ： lgn(全部是2-节点)
最好的情况 ：1/2lgn(全部是4-结点)
```



## 实现

*   直接实现
    *   复杂
*   红黑树实现



## 操作

### 查找

````js
二分法查找
````

### 插入

```js
// 这个要注意一下，你插入元素始终都是从叶子节点添加的，这个你自己试一下就行
2-节点插入 ：变成 3-节点
3-节点插入 ：变成 4-节点
4-节点插入 ：变成 5-节点
	此时，超过了2-3-4树每个节点最多三个元素的限制，所以需要调整
 // 调整
 红线
     叶子结点
        2-3-4树每个节点最多三个元素，超过了，就需要调整
        调整点儿就是一个节点有三个个元素，再插入元素，就变成四个了
     内部节点
     	要严格对应 一个节点 {n个元素、n+1个子节点}
 自底向上
 	// 树向上增长
    节点分裂
    	// 要插入数据的节点，如插入元素后，达到红线，该节点需要先分裂，再插入数据
    	：将4-节点分裂为三个只有一个元素节点的结点，左右兄弟结点分裂为中间元素节点的子节点 ,原树增长一层
    插入 ：插入数据到具体的位置
    合并 ：中间元素所在的根节点插入其父节点，中间元素的子结点也会成为其原 父节点的子节点
    	 若插入后，其父节点违背红线，就在先分调，载进行插入操作，直到树达到完美
    注意 ： 内部节点拆分过程中，其子节点从中间按照大小顺序，分给两边的元素节点
    结束标志 ：
    	进行过分调的父元素插入元素后，不需要调整，就完成树调整（我自己总结的）
        

 自顶向下
 	过程
    	从根结点向下查询，会分裂路径上遇到的4-节点，到达底部直接插入
	分裂 ：碰到 4-节点就进行自下分裂、向上合并
	结束 ： 一直到底部
	结果 ：
    	上下连续两个 4-节点不会出现
		最底层的节点要么是 2-节点，要么是3-节点
		原因 ：查找路径过程中的4-节点都被分裂合并了
 	
```

#### 自底向上

#### 自上到底

### 删除

*   概述

    ```js
    // 注意一个元素的最小后继元素，一定在叶子结点上：其子结点上或者右分支树的最左边
    1.任何一个数据元素删除，都可以归结为后继数据元素的删除，
    即把直接(最小)后继元素替换要删除的元素，然后删除这个最小后继元素
        这个最小后继元素一定是在叶子节点上，就转化成了叶子结点的删除
    
      
    2. 叶子结点
    	 1.叶子节点删除关键字，不影响父节点平衡或者自身关键字个数限制，就不用调整
            叶子节点是 3 节点，那么直接变成2-节点即可。不影响平衡
          2.以下情况会调整
    	//  1. 叶子结点变为空 2. 删除节点的关键字低于树的限制   
    	  叶子节点是 2 节点，删除后父节点会缺失一个儿子，破坏了2-3-4树特征，需要按照非叶子节点调整
        
        
    // 调整
    红线
        内部节点
        	//  就是一个节点有 0 个元素，那他最多有 1 个节点 
        	要保持平衡 ：要对应 { n 个元素 ：n+1 个子节点} 
    	叶子结点
        	// 有的叶子结点、结点中关键字个数有限制
        	关键字删除：不能破坏其父节点平衡 + 自身的平衡
            
    借关键字
    	// 借位过程，要严格保持红线
    	兄弟结点			
            借到：要调整当前节点、父节点临近关键字、借的位置的
            	// 相当于把临近兄弟节点的临近值复制到自身，然后跟父节点的临近值对调
            借不到 ：向父节点借关键字
    	父节点
        	借值 ：父节点临近的关键字下移动，要及时进行调整
            调整 ：
            	父节点关键字个数为零 ：
                	1. 子节点要合并为一个字节点
                    2. 空的结点，向兄弟借值，借不到就借其父节点，递归到根结点
                    3. 根结点向下借值以后，也变为空，就把子节点合并为一个，当成根节点
                    
                父节点关键字个数不为零
                	直接将下移的关键字节点和其直接兄弟结点合并
                    注意：合并过程中出现红线要及时往上冒
    
     自底向上
     	删除数据元素， 查看对应节点的父节点是否越过红线，越过了就调整
        借关键字
    		先跟兄弟借 、然后跟父节点借值及调整
        	
     自顶向下
     	没看懂，简书王振的文章没有删除
    ```

#### 自底向上



#### 自顶向下

