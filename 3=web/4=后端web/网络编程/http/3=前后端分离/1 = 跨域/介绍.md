

## 介绍

```java
跨域产生
    // 跨域问题 是针对ajax的一种限制
    跨域问题是浏览器对于ajax请求的一种安全限制：
    	一个页面发起的ajax请求，只能是与当前页域名相同的路径，这能有效的阻止跨站攻击
    浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都会出现跨域的问题。
                
            
问题
    实际生产环境中，肯定会有很多台服务器之间交互，地址和端口都可能不同，这需要我们解决跨域问题
                
                
跨域资源共享
    是请求的源和服务端的源不是“同源”，
    而服务端又没有设置允许的跨域资源共享，所以请求的响应被浏览器给拦截掉了         
```

## 跨域访问限制

```java
跨域限制
	// 非同源，共有三种行为受到限制
    （1） Cookie、LocalStorage 和 IndexDB 无法读取。
    （2） DOM 无法获得。
    （3） 请求的响应被拦截。 
    
同源
    只有在同源的，才允许访问相同的cookie、localStorage或是发送Ajax请求等等
    
浏览器
    //     // XMLHttpRequest 和 Fetch API 遵循同源策略 
    浏览器限制从脚本内发起的跨域 HTTP 请求。      
    使用这些 API 的 Web 应用程序只能从加载应用程序的同一个域请求 HTTP 资源，
```



## 同源/跨域产生

```java
同源策略
  是同源的请求才能相互访问
   // 本质  
    限制了从一个源加载的文档或脚本如何与来自另一个源的资源进行交互，是用于隔离潜在恶意文件的重要安全机制

产生场景
   前后端交互： 中间需要通过浏览器发送请求，会产生跨域问题
   服务器之间： 没有跨域的问题
    
产生    
	//同源、同域
        就是指"协议+域名+端口"三者相同
    	协议： 
    		http https
    	域名：
    		主域名 www.jd.com 与 www.taobao.com  ，jd 、taobao 就是主域名
    		子域名 www.jd.com 与 miaosha.jd.com ，www 、miaosha 就是子域名
    	端口
    		www.jd.com:8080 与 www.jd.com:8081 
		ip地址
		   // : 一个ip地址可以对应多个域名，但是一个域名只有一个ip地址                
            即便两个不同的域名指向同一个ip地址，也非同源     
    //非同源：跨域
		非同源就是跨域，               
```



## 跨域危害

```java
// 请求伪造
1.老李购买鱼竿，并登录了银行的网站输入账号密码进行了支付，浏览器在本地缓存了银行的Cookie2.
老李点击钓鱼网站，钓鱼网站使用老李登录银行之后的Cookie，伪造成自己是老李进行了转账操作。
这个过程就是著名的CSRF(Cross Site Request Forgery)，跨站请求伪造， 
正是由于可能存在的伪造请求，导致了浏览器的不安全
```





