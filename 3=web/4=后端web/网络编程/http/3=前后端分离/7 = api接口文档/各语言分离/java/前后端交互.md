## == 前端 ==

## axios

### 实例封装(工具)

```java
// 文件目录 common/utils/axios/request.js
// 创建axios实例
const service = axios.create({
//   baseURL: process.env.BASE_API, // api 的 base_url
  baseURL: baseURL,
  timeout: 5000 // 请求超时时间
})

// request拦截器
// service.interceptors.request.use()

// response 拦截器
service.interceptors.response.use(
  response => {

    return response.data
  },
  error => {
    console.log('err' + error) // for debug
    return Promise.reject(error)
  }
)
```

## 请求发送接收

### 路径参数

#### 前端

```js
  getCourseInfoById(id) {
    return request({

       /*
       	请求路径上就是
       	/admin/edu/course/course-info/id
       */ 

      url: `/admin/edu/course/course-info/${id}`,
      method: 'get'
    })
  },
      
      
// 接收      
```

#### 后端



```java
@CrossOrigin //允许跨域
@RestController
@RequestMapping("/admin/edu/course")
@Slf4j
public class CourseController {

	@ApiOperation("根据ID查询课程")
    @GetMapping("course-info/{id}")   // 注意怎么获取的
    public R getById(
            @PathVariable String id    // 注意这个
    ) {
         
        CourseInfoForm courseInfoForm = courseService.getCourseInfoById(id);
        if (courseInfoForm != null) {
            return R.ok().data("item", courseInfoForm);
        } else {
            return R.ok().message("数据不存在");
        }
    }
    
}

```



### data

#### 前端

```js
// api/test.js

import request from '../common/utils/axios/request'

const testApi = {

  saveCourseInfo(courseInfo) {
    return request({
      url: '/admin/edu/course/save-course-info',
      method: 'post',
      data: courseInfo     // 注意这个在后端是啥到哪里去了
    })
  },

 // params

}
```

#### 后端

```java
@CrossOrigin //允许跨域
@RestController
@RequestMapping("/admin/edu/course")
@Slf4j
public class CourseController {
    

    @PostMapping("save-course-info")
    public R saveCourseInfo(

            @RequestBody CourseInfoForm courseInfoForm     // 这个就是 axios 的 data
    ) {
        String courseId = courseService.saveCourseInfo(courseInfoForm);
        return R.ok().data("courseId", courseId).message("保存成功");
    }
    
}
```



### params

#### 前端

```java
  getPageList(page, limit, searchObj) {
    return request({
      url: `/admin/edu/course/list/${page}/${limit}`,
      method: 'get',
      params: searchObj
    })
  },
```

#### 后端

```java
@CrossOrigin //允许跨域
@Api(description = "课程管理")
@RestController
@RequestMapping("/admin/edu/course")
@Slf4j
public class CourseController {
    
    @ApiOperation("课程分页列表")
    @GetMapping("list/{page}/{limit}")
    public R listPage(
       	@PathVariable Long page,
         @PathVariable Long limit,
		CourseQueryVo courseQueryVo     // 这个对应的就是 params
    ){

        IPage<CourseVo> pageModel = courseService.selectPage(page, limit, courseQueryVo);
        List<CourseVo> records = pageModel.getRecords();
        long total = pageModel.getTotal();
        return R.ok().data("total", total).data("rows", records);
    }
    
}
```

