## 介绍

```java
概述
    1、要有一个 form 标签，method=post 请求 
    2、form 标签的 encType 属性值必须为 multipart/form-data 值 
    3、在 form 标签中使用 input type=file 添加上传的文件 
    4、编写服务器代码（Servlet 程序）接收，处理上传的数据。
    
```

## fileupload

### 上传

```java
// 导包
commons-fileupload-1.2.1.jar 
commons-io-1.4.jar
    
常用的类
ServletFileUpload 类，用于解析上传的数据。 
FileItem 类，表示每一个表单项 
    
boolean ServletFileUpload.isMultipartContent(HttpServletRequest request); 
	判断当前上传的数据格式是否是多段的格式。 
public List<FileItem> parseRequest(HttpServletRequest request) 
    解析上传的数据 
boolean FileItem.isFormField() 
    判断当前这个表单项，是否是普通的表单项。还是上传的文件类型。 
    true 表示普通类型的表单项 
    false 表示上传的文件类型 
String FileItem.getFieldName() 
    获取表单项的 name 属性值   
        
String FileItem.getString() 获取当前表单项的值。 String FileItem.getName(); 
	获取上传的文件名 
void FileItem.write( file )
    将上传的文件写到 参数 file 所指向抽硬盘位置 。 
```

### 下载

```java
response.getOutputStream(); 
servletContext.getResourceAsStream(); 
servletContext.getMimeType(); 
response.setContentType();

response.setHeader("Content-Disposition", "attachment; fileName=1.jpg"); 
	这个响应头告诉浏览器。这是需要下载的。
    而 attachment 表示附件，也就是下载的一个文件。
    fileName=后面， 表示下载的文件名
```

### 附件中文名乱码

```java
// URLEncoder 解决  IE 、谷歌浏览器 、火狐
    // 把中文名进行 UTF-8 编码操作。 
    String str = "attachment; fileName=" + URLEncoder.encode("中文.jpg", "UTF-8");
    // 然后把编码后的字符串设置到响应头中 
    response.setHeader("Content-Disposition", str);

// BASE64 编解码 火狐浏览器

```

