## 配置文件

### 介绍

```java
配置文件
	可以使用后缀名为：.properties  .yml   .yaml的类型
    	application.properties
	    application.yml
    	application.yaml
```



### .properties

```java
// jdbc.properties
jdbc.driverClassName=com.mysql.jdbc.Driver 
jdbc.url=jdbc:mysql://127.0.0.1:3306/springboot_test 
jdbc.username=root 
jdbc.password=root
```

### yml

#### 格式

```java
jdbc: 
	driverClassName: com.mysql.jdbc.Driver 
    url: jdbc:mysql://127.0.0.1:3306/springboot_test 
	username: root 
    password: root
```

#### 多个文件

```java

```



### yaml

## xml 配置

### 依赖

```xml
<!-- 配置连接池 --> 
<bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close"> 
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" /> 
    <property name="password" value="${jdbc.password}" /> 
</bean>
```

### 属性文件 - jdbc.properties 

```java
// jdbc.properties
jdbc.driverClassName=com.mysql.jdbc.Driver 
jdbc.url=jdbc:mysql://127.0.0.1:3306/springboot_test 
jdbc.username=root 
jdbc.password=root
```



## spring配置

### 依赖配置 - pom.xml

```xml
<dependency> 
    <groupId>com.alibaba</groupId>
    <artifactId>druid</artifactId> 
    <version>1.1.6</version> 
</dependency>
```

### 属性文件 - jdbc.properties

```java
// 同 xml 配置
```

### java 代码

```java
package com.itheima.config;

import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;

import javax.sql.DataSource;

@Configuration
@PropertySource("classpath:jdbc.properties")
public class JdbcConfig {

    @Value("${jdbc.url}")
    String url;
    @Value("${jdbc.driverClassName}")
    String driverClassName;
    @Value("${jdbc.username}")
    String username;
    @Value("${jdbc.password}")
    String password;

    @Bean
    public DataSource dataSource(){
        DruidDataSource dataSource = new DruidDataSource();
        dataSource.setDriverClassName(driverClassName);
        dataSource.setUrl(url);
        dataSource.setUsername(username);
        dataSource.setPassword(password);
        return dataSource;
    }

}


// 测试
@RestController 
public class HelloController { 
    @Autowired 
    private DataSource dataSource; 
    @GetMapping("hello") 
    public String hello() { 
    	System.out.println("dataSource = " + dataSource); 
        return "hello, spring boot!"; 
    } 
}
```

## SpringBoot

### 属性注入方式

#### 1.依赖配置 - pom.xml

```xml
<!--
	不设置此依赖会出现以下错误：
	Spring Boot Configuration Annotation Processor not found in classpath
-->
<dependency> 
    <groupId> org.springframework.boot </groupId> 
    <artifactId>spring-boot-configuration-processor</artifactId> 
    <!--不传递依赖--> 
    <optional>true</optional> 
</dependency>
```

#### 2. 属性文件 - application.properties

```java
注意
    默认的文件名必须是：application.properties或application.yml
xml 配置
    // 同 xml 配置, 但是文件名称改为 application.properties
        application.properties，这是Spring Boot默认读取的属性文件名
yml 设置
    // 同 xml 配置， 但是文件名称改为 application.properties
    // 多个 yml 文件
```

#### 3. java 代码

##### JdbcProperties.java

```java
介绍
    1. 加载配置项类  JdbcProperties
    2. 配置类    JdbcConfig
    
// com\itheima\config\JdbcProperties.java
@ConfigurationProperties(prefix = "jdbc")
public class JdbcProperties {

    private String url;
    private String driverClassName;
    private String username;
    private String password;

    // 其他的不再写出，直接 快捷键一起生成四个属性的 get set 方法
    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

}
// 测试
```

##### JdbcConfig.java

```java
@Configuration 
// 声明要使用 JdbcProperties 这个类的对象
@EnableConfigurationProperties(JdbcProperties.class) 
public class JdbcConfig { 
    @Bean
	public DataSource dataSource(JdbcProperties jdbc) { 
        DruidDataSource dataSource = new DruidDataSource(); 
        dataSource.setUrl(jdbc.getUrl()); 
        dataSource.setDriverClassName(jdbc.getDriverClassName()); 
        dataSource.setUsername(jdbc.getUsername()); 
        dataSource.setPassword(jdbc.getPassword()); 
        return dataSource; 
    } 
}

// 注入优化
// 一段属性只有一个Bean需要使用，我们无需将其注入到一个类
// （JdbcProperties，将该类上的所有注解去掉）, 而是直接在需要的地方声明即可
@Configuration public class JdbcConfig { 
    @Bean 
    // 声明要注入的属性前缀，
    // Spring Boot会自动把相关属性通过 set 方法注入到 DataSource 中 
    // 该类必须有对应属性的set方法！
    @ConfigurationProperties(prefix = "jdbc") 
    public DataSource dataSource() { 
        return new DruidDataSource();
    } 
}
```

##### 测试

```java
@RestController 
public class HelloController { 
    @Autowired 
    private DataSource dataSource; 
    @GetMapping("hello") 
    public String hello() { 
    	System.out.println("dataSource = " + dataSource); 
        return "hello, spring boot!"; 
    } 
}
```





#### 多 yml文件配置

```java
介绍
    1. 在spring boot中是被允许的。这些配置文件的名称必须为application-***.yml，
       并且这些配置文件必须要在application.yml配置文件中激活之后才可以使用
    2. 如果properties和yml配置文件同时存在在spring boot项目中；那么这两类配置文件都有效。
    	在两个配置文件中如果存在同名的配置项的话会以properties文件的为主。
    
例子
    //  application-abc.yml 
    //  application-def.yml 
    // application.yml
    // 多个文件名只需要写application-之后的名称，在多个文件之间使用,隔开
    spring: 
        profiles: 
            active: abc,def
                
// java 代码配置
@RestController
public class HelloController{
    @Autowi red
    private DataSource da taSource;
    @Value ("${itcast.ur1}")
    private String itcastUrl;
    @value ("${1theima. ur1}")
    private string itHeimaUrl;
    @GetMapping ( "hello")
    public string hello() {
        System. out. print1n ("dataSource ="+ datasource);
        System. out. printin("itcast.url="+ itcastUrl) ;
        System. out. println ("itheima.url"+ itHeimaUrl) ;
        return "he1lo， spring boot!";
	}                
}                              
```

