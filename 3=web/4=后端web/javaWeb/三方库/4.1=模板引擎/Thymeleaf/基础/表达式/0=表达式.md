## 标准表达式语法

### 概述

| 语法   | 描述           | 作用                 |
| ------ | -------------- | -------------------- |
| ${...} | 变量表达式     | 取出上下文变量的值   |
| *{...} | 选择变量表达式 | 取出选择对象的属性值 |
| #{...} | 消息表达式     | 取出国际化消息       |
| @{...} | 链接表达式     | 表示超链接地址       |
| ~{...} | 片段表达式     |                      |



### 变量表达式

```java
介绍
    是OGNL表达式 
    如果将Thymeleaf 与Spring - 集成在上下文变量上(也称为Spring术语中的模型属性)，则为Spring EL
    
    
语法
    ${value}
	value : 
		// 键值可以是普通量， 也可以是 对象
		context 上下文存入的键名， 
            context.setVariable("name", "lisi");
		request 域中的数据的键名
            model.setAttribute("value", student)    
            
	value 为对象
		// 对象的属性： student 对象中要有 getId 方法
		// private 属性，需要有 get 方法
		// public 属性， 可以直接使用            
        ${value.id} 等价于  ${value.getId()}
	value 为对象，
		// 字段是另一个对象， 引用类型
         // public class student { private School school;}
		// 以下两种方式得到的结果都是一样的            
          ${student.school.name}
		  ${student.school.getName()}
	
	
用处
1. 属性值或作为它们的一部分
    <span th:text="${book.author.name}">
	等价于 ： ((Book)context.getVariable("book")).getAuthor().getName()
        

```

### 选择表达式

```java
介绍
    它们不是整个上下文变量映射上执行，而是在先前选择的对象
语法
    *{user.name}
例子
    <div th:object="${book}">
      ...
      <span th:text="*{title}">...</span>
      ...
    </div>
等价于
{
  // th:object="${book}"
  final Book selection = (Book) context.getVariable("book");
  // th:text="*{title}"
  output(selection.getTitle());
}
          
```

### 消息(i18n)国际化表达式

```java
介绍
    允许从外部源(如:.properties)文件中检索特定于语言环境的消息，通过键来引用这引用消息。
    同一个内容，使用多国语言进行表达
    
```

### 链接(URL)表达式

```java
介绍
    构建URL并向其添加有用的上下文和会话信息(通常称为URL重写的过程)。
详情见
    url 请求表达式
```

### 片段表达式

```java
介绍
    一种简单的方法用来表示标记的片段并将其移动到模板中。 
    由于这些表达式，片段可以被复制，传递给其他模板的参数等等
语法    
	// 常见的是使用th:insert或th:replace来插入片段    
    // 可以在任何地方使用，就像任何其他变量一样
    <div th:insert="~{commons :: main}">...</div>
        
        
```

## 文本使用

```java
文本类型
    文本文字，例如:'one text', 'Another one!',…
    数字文字，例如:0,10, 314, 31.01, 112.83,…
    布尔文字，例如:true,false
    Null文字，例如:Null
    文字标记，例如:one, sometext, main,…
操作
	字符串连接:+
    文字替换:|The name is ${name}|  // 渲染出来 不会有空格的错误

注意
	如果文本中含有空格，需要使用 ''  引起来，否则会报错
	<p th:text="'hello wer'">        
```



## 运算符

### 符号

```java
算术运算:
	二进制操作:+, -, *, /, %
    减号(一元运算符):-


布尔运算:
	二进制运算符，and,or
    布尔否定(一元运算符):!,not
	三元运算符： x>y?x:y , 可以省略 y   x>y?x      
        
比较和相等:
	比较运算符:>,<,>=,<=(gt,lt,ge,le)
	相等运算符:==, != (eq, ne)
条件操作符:
	If-then:(if) ? (then)
    If-then-else:(if) ? (then) : (else)
	Default: (value) ?: (defaultvalue)

```

### 解析

```java
是从左到右进行解析的
<p th:text="3+3 + 'dfs' + 8 + 8>    // 6dfs88
```



## 表达式预处理

```java
介绍
    在__之间指定
例子
    #{selection.__${sel.code}__}
	第一个：被执行的变量表达式是:${sel.code}，并且将使用它的结果作为表达式的一部分
```

