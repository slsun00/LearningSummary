## 注解实现

### 介绍

```java
springboot 注解了以后，就不需要做其他的配置， springboot 就可以自动进行跨域配置
    
// 如果你使用注解解决不了跨域问题， 很有可能就是你 idea 出问题了
解决方法一
    让别人写一个一样的后端，进行跨域测试，测试通了，再用你写的后端，连接后端，
解决方法二
    是框架出现问题了，重建项目，
    重建项目还是不行，写在 idea 进行重装试试？？？
```



### 方法上

```java

@RestController
@RequestMapping("admin")
public class MessageController {

    @PutMapping("/saveMessage")
    // 方式一： @CrossOrigin(origins="http://localhost:3000")
    // 方式二：
    @CrossOrigin
    public R saveMessage() {
	  ....    
    }
}
```

### 类上

```java
@RestController
// 方式一： @CrossOrigin(origins="http://localhost:3000") web 项目运行地址
// 方式二：
@CrossOrigin
@RequestMapping("admin")
public class MessageController {

    @PutMapping("/saveMessage")

    public R saveMessage() {
	  ....    
    }
}
```



## 方式一

```java
package com.vueserver.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;

/**
 * @Author: fanli
 * @Date: 2018/8/3 12:40
 * @Description: 前后端联调-跨域配置
 */
@Configuration
public class CorsConfig {

    private CorsConfiguration buildConfig() {
        CorsConfiguration corsConfiguration = new CorsConfiguration();
        corsConfiguration.addAllowedOrigin("*"); // 源地址
        corsConfiguration.addAllowedHeader("*"); // 请求头
        corsConfiguration.addAllowedMethod("*"); // 请求方法，restful带着
        return corsConfiguration;
    }

    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", buildConfig()); // 所有的api都是可跨域的
        return new CorsFilter(source);
    }

}

```

## 方式二

```java
package com.boyanto.test1.common.utils.setProxy;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;

/**
 * @author slsun
 * @version 1.0
 * @title: CorsConfig
 * @description //TODO $
 * @date: 2021/7/5 14:43
 * 
 * WebMvcConfigurerAdpter
 */
@Configuration
public class CorsConfig extends WebMvcConfigurerAdapter {

    private CorsConfiguration buildConfig() {
        CorsConfiguration corsConfiguration = new CorsConfiguration();
        corsConfiguration.addAllowedOrigin("*"); // 源地址
        corsConfiguration.addAllowedHeader("*"); // 请求头
        corsConfiguration.addAllowedMethod("*"); // 请求方法，restful带着
        return corsConfiguration;
    }

    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", buildConfig()); // 所有的api都是可跨域的
        return new CorsFilter(source);
    }

}

```

