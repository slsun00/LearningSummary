## 域空间

### 介绍

```java
javaWeb 边编程中， 有三个可以存放域属性的空间范围对象，按照存储对象从小打到的顺序分别为
    ServletCongtext -->  HttpSession --> HttpServletRequest
    
 /*
 页面域：当前JSP页面范围
 请求域：
 	一次请求， 只在一次请求中有效
 	request.setAttribute("name", "lisi")
 会话域：
 	一次会话， 一个浏览器和服务器之间发生的一系列的请求和响应的过程
 	HttpSession session = request.setSession();
 	session.setAttribute("name", "lisi")
 	
 应用于： 整个web应用
 
 */   
    
区别
ServetCoItext
    // 整个应用都可以应用，浏览器关闭就关闭了
	即application,置入其中的域属性是整个应用范围的,可以完成跨会话共享数据。
        
HttpSession
        // 浏览器关闭就结束了，但是在同一个请求中是可以共享数据的
        置入其中的域属性是会话范围的，可以完成跨请求共享数据。
        
HttpServletRequest
        // 一次请求中使用
        置入其中的域属性是请求范围的，可以完成跨Servlet 共享数据。
使用原则
    // 这些Servlet必须在同一-请求中
    在可以保证功能需求的前提下,优先使用小范围的。
    这样不仅可以节省服务器内存，还可以保证数据的安全性。
  
```

### 注意

```java
request的生命周期是request请求域，一个请求结束，则request结束

session的生命周期是session会话域，打开一个浏览器请求一个网站的页面后，Session开始，当session超过时间限制后，session注销而失效
或是人为使用session.invalidate();使用session失效；
或是关闭浏览器后，session还存在，但是这里已经无法获取session了，过一会它还是失效    
```



## servlet_context

### 介绍

```java
ServletContext
    是一个全局的储存信息的空间，服务器开始就存在，服务器关闭才释放
    。    
    ServletContext对象通常也被称之为context域对象

    
```

![image-20210312191904203](image-20210312191904203.png)





### 操作

#### 生命周期

```java
ServletContext中的属性的生命周期从创建开始，到服务器关闭结束。
```

#### 创建/获取

```java
WEB容器在启动时，
    会为每个Web应用程序都创建一个对应的ServletContext，代表当前Web应用，并且它被所有客户端共享
    所有Servlet共享同一个ServletContext对象, 可以通过ServletContext对象来实现通讯
    
内容
    你可以把它想象成一张表，这个和Session非常相似：
    名字（String） 值Object
获取
    this.getServletContext(); 
	this.getServletConfig().getServletContext();
语法例子
    
    response.setContentType("text/html;charset=utf-8");
    PrintWriter out = response.getWriter();
    // 取出ServletContext的某个属性
    //1.首先获取到ServletContext
    ServletContext servletContext = this.getServletContext();
    //2.取出属性
    String name = (String)servletContext.getAttribute("name");
    out.println("name="+name);

和 cookie 区别
    只要不关闭服务器，不同的浏览器访问的结果都是样的
```



#### 销毁

```java
ServletContext对象被销毁
	web应用关闭
    Tomcat关闭
    Web应用reload的时候，
```



### 方法

```java
添加属性：setAttribute(String name, Object obj);

得到值：getAttribute(String name)，这个方法返回Object

删除属性：removeAttribute(String name)
```

