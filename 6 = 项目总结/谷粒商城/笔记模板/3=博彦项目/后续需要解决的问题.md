## 问题

```java
1.  解决SpringBoot多模块发布的问题？ 
    https://www.sohu.com/a/322872841_99978040

2. 如何打包部署（在下边
    https://my.oschina.net/sdlvzg/blog/1573616

3. 多模块 controller 扫描
    // springboot扫描不同包下s的controller
    https://blog.csdn.net/qq_44695727/article/details/109154845


4. 在 config 文件夹中有好多个 java 配置文件，都是使用硬编码进行配置的
   那么该怎么处理，将这么硬编码文件变成 yml 文件，然后

```

## 新操作

### springboot 多模块项目构建

```java
React_test{maven module}

	// 这个是用来放置自己总结的 module 中，自己
	common{maven module}

    // 只用一个 module 有一个 application.java 用来注册项目    
	test_parent(spring-initializr) {
        
	   // 这个也是可以复用的组件，但是需要再次使用的时候，需要进行和父项目进行配置           
        Ucenter( maven module)
            
        // 
		            
		test_center (maven moudle)            
     }
	
	// 总的依赖, 这个模块 pom 文件， 用来进行总结的依赖配置
	pom.xml  
```

### springboot  创建配置文件

```java
.gitignore：分布式版本控制系统git的配置文件，意思为忽略提交
	// 用git做版本控制时 用这个文件控制那些文件或文件夹 不被提交（不用git的话可删除 没影响）
    在 .gitingore 文件中，遵循相应的语法，即在每一行指定一个忽略规则。 如：.log、/target/、.idea



6. .idea文件夹：存放项目的配置信息

    包括数据源，类库，项目字符编码，历史记录，版本控制信息等。

7. pom.xml：项目对象模型（核心重要）

    pom.xml主要描述了项目的maven坐标，依赖关系，开发者需要遵循的规则，缺陷管理系统，组织和licenses，以及其他所有的项目相关因素，是项目级别的配置文件。
5. .iml文件：intellij idea的工程配置文件
	// 有的文件每个导入IDEA的项目都会生成一个项目同名的 .iml文件 
    // 用于保存你对这个项目的配置 （删了程序重新导入后还会生成 但由于配置丢失可能会造成程序异常）
    里面包含当前project的一些配置信息，如模块开发的相关信息，比如java组件，maven组件，插件组件等，还可能会存储一些模块路径信息，依赖信息以及一些别的信息。    
    
// ================================================================================
2. mvnw：全名是maven wrapper的文件
	
    // linux上处理mevan版本兼容问题的脚本（可删除 没影响）
    // mvnw文件适用于Linux（bash）
    它的作用是在maven-wrapper.properties文件中记录你要使用的maven版本，当用户执行mvnw clean 命令时，发现当前用户的maven版本和期望的版本不一致，那么就下载期望的版本，然后用期望的版本来执行mvn命令，比如mvn clean命令。

3. mvn文件夹：存放mvnw相关文件

    存放着maven-wrapper.properties和相关jar包以及名为MavenWrapperDownloader的java文件
	
4. mvn.cmd：
    // mvnw.cmd适用于Windows 环境
    // windows 上处理mevan版本兼容问题的脚本（可删除 没影响）
    
    执行mvnw命令的cmd入口
5. HELP.md 
    md是一种文档格式 这个就是你项目的帮助文档（可删除 没影响）
*注：，。


```



## 多模块开发



### 方案一

```java
// 只用一个 module 有一个 application.java 用来注册项目    
test_parent(spring-initializr) {
    
    // 这个是用来放置自己总结的 module 中，自己
	common{maven module}
    
    // 这个也是可以复用的组件，但是需要再次使用的时候，需要进行和父项目进行配置           
    Ucenter( maven module)
    
	// 总的依赖, 这个模块 pom 文件， 用来进行总结的依赖配置
	pom.xml  
    
}
```



### 方案二

#### 分层

```java
React_test{maven module}

	// 这个是用来放置自己总结的 module 中，自己
	common{maven module}

    // 只用一个 module 有一个 application.java 用来注册项目    
	test_parent(spring-initializr) {
        
	   // 这个也是可以复用的组件，但是需要再次使用的时候，需要进行和父项目进行配置           
        Ucenter( maven module)
            
        // 
		            
		test_center (maven moudle)            
     }
	
	// 总的依赖, 这个模块 pom 文件， 用来进行总结的依赖配置
	pom.xml  
```

#### 创建

```java
1. new project -- spring Initializr -- springboot 
     只保留：
    		.idea 文件夹
    		 项目 pom 文件
    		 以及一个 *.iml 文件
2. 字模块的创建
    右键点击父工程，选择 New -> Module... 创建子模块
    除了 web 子模块创建时选择添加 Spring Web 依赖（当然也可以创建时不添加，等后面再手动编辑 pom.xml 文件添加），其他模块暂时不添加依赖。
3. 内容删除
    子模块的 mvnw、mvnw.cmd 文件及 .mvn 文件夹全部删除。
    src 里的内容
        只保留 web 的启动类和配置文件
        其他子模块的的启动类和配置文件都删除
```

#### 父项目 pom

```xml
介绍
	里面声明该父工程包含的子模块，同时抽取统一的配置信息和依赖版本控制，
	这样可以方便子 pom 直接引用，简化子 pom 的配置。
注意
    多模块项目中，父模块打包类型必须是 pom。

	// 这个删除不删除，看你自己吧
    因为开发框架是 spring boot，父模块默认继承 spring-boot-starter-parent，
	因此可以删除 spring-boot-starter 和 spring-boot-starter-test 依赖（祖先已经包含了）

配置
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
 
    <groupId>com.example</groupId>
    <artifactId>hangge</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>hangge</name>
    <description>Demo project for Spring Boot</description>
 
    <!-- 父模块打包类型必须为pom -->
    <packaging>pom</packaging>
 
    <!-- parent指明继承关系，给出被继承的父项目的具体信息-->
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.2.5.RELEASE</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>
 
    <properties>
        <java.version>1.8</java.version>
    </properties>
 
    <!-- 模块说明：这里声明多个子模块 -->
    <modules>
        <module>hangge-base</module>
        <module>hangge-dao</module>
    </modules>
 
    <!-- 版本说明：这里统一管理依赖的版本号 -->
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.example</groupId>
                <artifactId>hangge-base</artifactId>
                <version>0.0.1-SNAPSHOT</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project>
```

#### 子项目 pom

```xml
介绍
	由于子模块的配置信息会继承父模块的，所以子模块原来的 properties 可删掉。 
删除
	除了 web 主模块的 plugn 打包插件需要， 其他的都不需要，删除即可

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
 
    <groupId>com.example</groupId>
    <artifactId>hangge-base</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>hangge-base</name>
    <description>Demo project for Spring Boot</description>
 
    <!-- 继承本项目的父工程 -->
    <parent>
        <groupId>com.example</groupId>
        <artifactId>hangge</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>
 
    <dependencies>
         <!-- hangge 子模块又依赖 base 子模块 -->
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>hangge-base</artifactId>
        </dependency>
        <!-- 父模块中没有使用，但是子模块需要的 -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.6</version>
        </dependency>
    </dependencies>
</project>
```

### IDEA 使用

#### 添加依赖

```java
// A 依赖(使用) B
project struct -- modules --  A -- dependency -- 找到 B 
```





#### 遇到的问题

```java
目前项目启动类 HanggeWebApplication 在 com.example.hanggeweb 包下面，我们需要将其移动移动到 com.example 包下。
    
    如果不移动启动类的话，在多模块项目中会可能会碰到一个模块无法通过 @Autowired 注入其他模块里的对象的问题。启动时会报类似如下的错误：

    Field bookService in com.example.hanggeweb.controller.HelloController required a bean of type 'com.example.hanggeservice.BookService' that could not be found.
    
```

